conda activate functioning_bot
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
python -m pip install -U pip setuptools wheel
python -m pip install -U openmim

mim install mmengine
pip uninstall mmcv -y
MMCV_WITH_OPS=1 pip install -e . -v --force-reinstall --no-deps
mim install "mmdet>=3.0.0,<3.3.0"
mim install "mmdet3d>=1.1.0"

pip install open3d opencv-python matplotlib tqdm

pip uninstall numpy -y
pip install 'numpy<2'
pip uninstall matplotlib -y
pip install matplotlib



python - <<'PY'
import sys, numpy, matplotlib
print("Python     :", sys.version.split()[0])
print("NumPy      :", numpy.__version__)
print("Matplotlib :", matplotlib.__version__)
from matplotlib import pyplot as plt
print("pyplot OK")
import torch, mmengine, mmcv
print("Torch     :", torch.__version__, "| CUDA:", torch.version.cuda, "| is_available:", torch.cuda.is_available())
print("MMEngine  :", mmengine.__version__)
import pkgutil
try:
    import mmcv
    print("MMCV   :", mmcv.__version__, "at", mmcv.__file__)
    print("has mmcv._ext ? ", pkgutil.find_loader("mmcv._ext") is not None)
except Exception as e:
    print("MMCV import error:", repr(e))
PY